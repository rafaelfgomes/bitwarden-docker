services:
  bitwarden:
    image: vaultwarden/server
    container_name: bitwarden
    hostname: bitwarden
    ports:
      - ${EXTERNAL_PORT:-80}:80
    volumes:
      - data:/data
    environment:
      WEBSOCKET_ENABLED: "true" # Required to use websockets
      SIGNUPS_ALLOWED: "true" # set to false to disable signups
    restart: always
    networks:
      net:
        ipv4_address: ${BITWARDEN_IP}
    dns:
      - ${DNS_IP_1}
      - ${DNS_IP_2:-9.9.9.9}

volumes:
  data:
    name: bitwarden-data

networks:
  net:
    external: true
    name: apps-network
